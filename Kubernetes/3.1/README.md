# [Домашнее задание к занятию «Компоненты Kubernetes»](https://github.com/netology-code/kuber-homeworks/blob/main/3.1/3.1.md)

### Задание. Необходимо определить требуемые ресурсы
Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения. 
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий. 
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

----

### Решение


1. Сначала сделайте расчёт всех необходимых ресурсов.
Worker nods
| Сервис | ОЗУ(ГБ) | ЦП (ядро) |Реплик | 
|----------|----------|----------|----------| 
| БД       | 4 | 1 | 3 | 
| Система кеширования| 4 | 1 | 3 | 
| Фронтенд | 0,05| 0.2 | 5| 
| Бекенд| 0,6 | 1 | 10 | 
| Итого| 30,25 | 17 | 21 |
Сюдаже добавим запас на случае выхода  из строя как минимум одной ноды , а так же дл работы системны т.к. считается что k8s использует в работ только 75% , все остальное занимает работа системы 30,25 * 0,75 = 22,69 ГБ будет использоваться при данных пораметрах , сооствественно , нам нужно добавить еще 30.25 - 22,69 ГБ = 7,57 гб к полеченным значениям. 
Запас будем формировать из необходимых ресурсов на работу одного сервиса с большим значением ресурсов 
|  | ОЗУ(ГБ) | ЦП (ядро) 
|----------|----------|----------|
|Запас для k8s |7,57 |6| 
|Запас для ноды |4|6| 
|Итого|41 |18| 
Contral plain 
Для управления работой всеми ресурсами нам потребуется ресурсы для работы системы  ,и дополнительно 10-15% от worker nods
т.к. нам нужно упаковать приложение в чарт для деплоя в разных окружениях , то данные ресурсы можно умножать на 3 (test,dev,prod)
| Сервис | ОЗУ(ГБ) | ЦП (ядро) |Реплик | 
|----------|----------|----------|----------| 
| Contral plain  | 4 | 2 |3 | 
| Итого | 12| 6 |3 | 

Количество рабочих нод 
Для оптимизации т.к. нагрузка фротнтенда и бекенда небольшая , то их можно вынести в одноу ноду 

| Сервис | НОД | 
|----------|----------|
| БД       | 3 |
| Система кеширования|3|
| Фронтенд и Бекенд | 3| 
| Итого| 9 |
Параметры нод 

| Сервис | ОЗУ(ГБ) | ЦП (ядро) |
|----------|----------|----------|
| БД       | 8 |1|
| Система кеширования|4|1|
| Фронтенд и Бекенд | 2| 2|
| Contral plain  | 4| 2|
